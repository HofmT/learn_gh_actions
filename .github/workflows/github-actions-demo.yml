name: CI
run-name: ${{ github.actor }} is testing out GitHub Actions üöÄ
on: [push]
jobs:
  test:
    runs-on: ubuntu-latest
    container: node:20.16-bullseye
    services:
      postgres:
        image: postgres:16.1
        options: --health-cmd="pg_isready -U plural" --health-interval=10s --health-timeout=5s --health-retries=5
        env:
          POSTGRES_USER: plural
          POSTGRES_PASSWORD: "plural"
          POSTGRES_DB: plural_integration
        ports:
          - 5432:5432
      mongo:
        image: mongo:7.0.12
        ports:
          - 27017:27017
      redis:
        image: redis:5.0
        ports:
          - 6379:6379
      rabbitmq:
        image: rabbitmq:3.12.12-alpine
        ports:
          - 5672:5672
        
    steps:
      - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "The nodejs version is $(node -v)"
      - run: echo "The postgres version is $(psql --version)""
      - run: echo "üçè This job's status is ${{ job.status }}."

